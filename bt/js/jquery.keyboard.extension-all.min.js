/*! jQuery.mousewheel.js Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net) MIT License
 * Version: 3.0.6 Requires: 1.2.2+ */
(function(e){function c(a){var b=a||window.event,c=[].slice.call(arguments,1),d=0,g=0,h=0;a=e.event.fix(b);a.type="mousewheel";b.wheelDelta&&(d=b.wheelDelta/120);b.detail&&(d=-b.detail/3);h=d;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(h=0,g=-1*d);void 0!==b.wheelDeltaY&&(h=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(g=-1*b.wheelDeltaX/120);c.unshift(a,d,g,h);return(e.event.dispatch||e.event.handle).apply(this,c)}var d=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var b=d.length;b;)e.event.fixHooks[d[--b]]=
e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=d.length;a;)this.addEventListener(d[--a],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var a=d.length;a;)this.removeEventListener(d[--a],c,!1);else this.onmousewheel=null}};e.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);

/* jQuery UI Virtual Keyboard Extensions ~ https://github.com/Mottie/Keyboard
 * By Rob Garrison ~ MIT license
 * Autocomplete v1.4 for v1.8+
 * Mobile Themes v1.0.1 (updated 2/23/2012)
 * Navigation v1.2 for v1.8.14+
 * Scramble Extension v1.0 for v1.17.14+
 * Typing Simulator v1.3 for v1.8.14+
 */
(function(e){e.fn.addAutocomplete=function(){return this.each(function(){var c=e(this).data("keyboard");c&&(c.autocomplete_new_version=function(c){c[0]=parseInt(c[0],10);return 1<c[0]||1===c[0]&&9<=parseInt(c[1],10)}(e.ui.version.split(".")),c.autocomplete_init=function(d,b,a){c.options.alwaysOpen&&c.isVisible()&&c.autocomplete_setup();c.$el.bind("visible.keyboard",function(){c.autocomplete_setup()}).bind("change.keyboard",function(){c.hasAutocomplete&&c.isVisible()&&c.$el.val(c.$preview.val()).trigger("keydown.autocomplete")}).bind("hidden.keyboard",
function(a){c.$el.autocomplete("close")}).bind("autocompleteopen",function(a,b){c.hasAutocomplete&&c.$autocomplete.menu.element.position({of:c.$keyboard,my:"right top",at:"left top",collision:"flip"})}).bind("autocompleteselect",function(a,b){var d=b.item.value;c.hasAutocomplete&&""!==d&&(c.$preview.val(d).focus(),c.lastCaret={start:d.length,end:d.length})})},c.autocomplete_setup=function(){c.$autocomplete=c.$el.data("autocomplete")||c.$el.data("uiAutocomplete");c.hasAutocomplete="undefined"===typeof c.$autocomplete?
!1:c.$autocomplete.options.disabled?!1:!0;c.hasAutocomplete&&!c.autocomplete_bind&&(c.$preview.bind("keydown",function(d){return c.autocomplete_input(d)}),c.$allKeys.bind("mouseup  mousedown mouseleave touchstart touchend touchcancel",function(d){c.autocomplete_input(d)}),c.autocomplete_bind=!0)},c.autocomplete_input=function(d){var b;b=e.ui.keyCode;switch(d.keyCode){case b.PAGE_UP:c.$autocomplete._move("previousPage",d);d.preventDefault();break;case b.PAGE_DOWN:c.$autocomplete._move("nextPage",d);
d.preventDefault();break;case b.UP:c.$autocomplete._move("previous",d);d.preventDefault();break;case b.DOWN:c.$autocomplete._move("next",d);d.preventDefault();break;case b.ENTER:case b.NUMPAD_ENTER:b=c.$autocomplete.menu.element.find("#ui-active-menuitem,.ui-state-focus").text()||"";""!==b&&c.$preview.val(b);c.autocomplete_new_version&&c.$autocomplete.menu.select(d);break;default:clearTimeout(c.$autocomplete.searching),c.$autocomplete.searching=setTimeout(function(){c.$autocomplete.term!==c.$autocomplete.element.val()&&
(c.$autocomplete.selectedItem=null,c.$autocomplete.search(null,d))},c.$autocomplete.options.delay)}},c.origEscClose=c.escClose,c.escClose=function(d){c.hasAutocomplete&&("ui-active-menuitem"===d.target.id||e(d.target).closest("ul").hasClass("ui-autocomplete"))||c.origEscClose(d)},c.autocomplete_init())})}})(jQuery);
(function(e){e.fn.addMobile=function(c){var d,b={container:{theme:"a"},buttonMarkup:{theme:"a",shadow:"true",corners:"true"},buttonHover:{theme:"c"},buttonAction:{theme:"b"},buttonActive:{theme:"e"}};return this.each(function(){var a=e(this).data("keyboard");a&&"undefined"!==typeof e.fn.textinput&&(a.mobile_options=d=e.extend({},b,c),a.mobile_initialized=!1,a.mobile_init=function(){e(".ui-keyboard-input").textinput();a.options.alwaysOpen&&a.isVisible&&a.mobile_setup();a.$el.bind("visible.keyboard",
function(){!0!==a.mobile_initialized&&a.mobile_setup()})},a.mobile_setup=function(){var b;b=e.extend({},d.buttonMarkup,d.buttonAction);a.$keyboard.addClass("ui-bar ui-bar-"+d.container.theme).removeClass("ui-widget ui-widget-content").find("button:not(."+a.options.css.buttonAction+")").addClass(a.modButton(d.buttonMarkup)).end().find("."+a.options.css.buttonAction).addClass(a.modButton(b)).end().find("button").removeClass("ui-corner-all ui-state-default").hover(function(){e(this).addClass("ui-btn-hover-"+
d.buttonHover.theme)},function(){e(this).removeClass("ui-btn-hover-"+d.buttonHover.theme)});a.options.css.buttonAction="ui-btn-down-"+d.buttonActive.theme;a.msie&&a.$preview[0]!==a.el&&(a.$preview.hide(),a.$keyboard.css("width",""),a.width=a.$keyboard.outerWidth(),a.$keyboard.width(a.width+parseInt(a.$preview.css("fontSize"),10)),a.$preview.width(a.width),a.$preview.show());b=a.options.position;b.of=b.of||a.$el.data("keyboardPosition")||a.$el;b.collision=a.options.usePreview?b.collision||"fit fit":
"flip flip";a.$keyboard.position(b);a.mobile_initialized=!0},a.modButton=function(a){return"ui-btn ui-btn-up-"+a.theme+("true"==a.shadow?" ui-shadow":"")+("true"==a.corners?" ui-btn-corner-all":"")},a.mobile_init())})}})(jQuery);
(function(e){e.keyboard=e.keyboard||{};e.keyboard.navigationKeys={toggle:112,enter:13,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40};e.fn.addNavigation=function(c){return this.each(function(){var d,b,a=e(this).data("keyboard");b={position:[0,0],toggleMode:!1,focusClass:"hasFocus"};a&&(a.navigation_options=d=e.extend({},b,c),a.navigation_keys=b=e.extend({},e.keyboard.navigationKeys),a.saveNav=[a.options.tabNavigation,a.options.enterNavigation],a.allNavKeys=e.map(b,function(a,
b){return a}),a.navigation_init=function(){a.$keyboard[d.toggleMode?"addClass":"removeClass"](d.focusClass).find(".ui-keyboard-keyset:visible").find('.ui-keyboard-button[data-pos="'+d.position[0]+","+d.position[1]+'"]').addClass("ui-state-hover");a.$preview.unbind("keydown.keyboardNav").bind("keydown.keyboardNav",function(b){return a.checkKeys(b.which)})},a.checkKeys=function(b,c){if("undefined"!==typeof b){var f=a.navigation_keys;if(b===f.toggle||c)d.toggleMode=c?!1:!d.toggleMode,a.options.tabNavigation=
d.toggleMode?!1:a.saveNav[0],a.options.enterNavigation=d.toggleMode?!1:a.saveNav[1];a.$keyboard[d.toggleMode?"addClass":"removeClass"](d.focusClass);if(d.toggleMode&&b===f.enter)return a.$keyboard.find(".ui-keyboard-keyset:visible").find('.ui-keyboard-button[data-pos="'+d.position[0]+","+d.position[1]+'"]').trigger("repeater.keyboard"),!1;if(d.toggleMode&&0<=e.inArray(b,a.allNavKeys))return a.navigateKeys(b),!1}},a.navigateKeys=function(b,c,f){f=f||d.position[1];c=c||d.position[0];var e=a.$keyboard.find(".ui-keyboard-keyset:visible"),
h=e.find(".ui-keyboard-button-endrow").length-1,m=e.find('.ui-keyboard-button[data-pos^="'+c+',"]').length-1,k=a.navigation_keys;switch(b){case k.pageup:c=0;break;case k.pagedown:c=h;break;case k.end:f=m;break;case k.home:f=0;break;case k.left:f+=0<f?-1:0;break;case k.up:c+=0<c?-1:0;break;case k.right:f+=1;break;case k.down:c+=c+1>h?0:1}m=e.find('.ui-keyboard-button[data-pos^="'+c+',"]').length-1;f>m&&(f=m);e.find(".ui-state-hover").removeClass("ui-state-hover");e.find('.ui-keyboard-button[data-pos="'+
c+","+f+'"]').addClass("ui-state-hover");d.position=[c,f]},a.options.alwaysOpen&&a.isVisible&&(a.$keyboard.find(".ui-state-hover").removeClass("ui-state-hover"),a.navigation_init()),a.$el.bind("visible.keyboard",function(b){a.$keyboard.find(".ui-state-hover").removeClass("ui-state-hover");a.navigation_init()}).bind("inactive.keyboard hidden.keyboard",function(b){a.checkKeys(b.which,!0)}).bind("navigate navigateTo",function(b,c,d){c=isNaN(c)?c.toLowerCase():c;a.navigation_keys.hasOwnProperty(c)?a.checkKeys(a.navigation_keys[c]):
a.navigateKeys(null,c,d)}))})}})(jQuery);
(function(e){e.keyboard=e.keyboard||{};e.fn.addScramble=function(c){var d={targetKeys:/[a-z\d]/i,byRow:!0,randomizeOnce:!0};return this.each(function(){var b,a=e(this).data("keyboard");a&&(b=a.scramble_options=e.extend({},d,c),a.scramble_setup=function(c){var d,f,g,h,m,k,n,q,r,p,l;if(!a.randomizeOnce||!a.randomizeComplete)if(d=c.find(".ui-keyboard-keyset"),c.length){for(f=0;f<d.length;f++)if(g=d.eq(f),n=0,l=[],r=[],q=[],p=[],g.find("button, br").each(function(){"BR"===this.tagName?(b.byRow?(l.push(this),
r.push(!1),p[n]=l,q[n]=r,l=[],r=[]):(p[n]=this,q[n]=!1),n++):(k=e(this).attr("data-value")||"",k=1===k.length&&b.targetKeys.test(k)?k:!1,b.byRow?(l.push(this),r.push(k)):(p[n]=this,q[n]=k,n++))}),g.find(".ui-keyboard-button-endrow").remove(),b.byRow)for(m=0;m<p.length;m++)for(l=a.shuffle(p[m],q[m]),h=0;h<l.length;h++)g.append(l[h]);else for(l=a.shuffle(p,q),h=0;h<l.length;h++)g.append(l[h]);a.randomizeOnce||a.randomizeComplete||a.$el.bind("beforeVisible.keyboard",function(){a.rescramble&&(a.$keyboard=
a.scramble_setup(a.$keyboard));a.rescramble=!0});a.randomizeComplete=!0;return c}},a.shuffle=function(a,b){for(var c,d,e=a.length;0<e;)d=Math.floor(Math.random()*e),!1===b[e-1]&&e--,!1!==b[e-1]&&!1!==b[d]&&(e--,c=a[e],a[e]=a[d],a[d]=c);return a},a.options.create=function(){var b=a.buildKeyboard();return a.scramble_setup(b)})})}})(jQuery);
(function(e){e.fn.addTyping=function(c){var d={showTyping:!0,delay:250};return this.each(function(){var b=e(this).data("keyboard");b&&(b.typing_options=e.extend({},d,c),b.typing_keymap={" ":"space",'"':"34","'":"39","&nbsp;":"space","\b":"bksp","\n":"Enter","\r":"Enter","\t":"tab"},b.typing_xref={8:"bksp",9:"tab",13:"enter",32:"space"},b.typing_event=b.typing_flag=!1,b.typing_setup=function(){b.typing_flag||(b.typing_flag=!0,(b.$preview?b.$preview:b.$el).bind("keyup.keyboard",function(a){37<=a.which&&
40>=a.which||(16===a.which&&(b.shiftActive=!1),18===a.which&&(b.altActive=!1),16!==a.which&&18!==a.which)||(b.showKeySet(),setTimeout(function(){b.$preview.focus()},200))}).bind("keydown.keyboard",function(a){a.temp=!1;16===a.which&&(a.temp=b.shiftActive?!1:!0,b.shiftActive=!0);18===a.which&&(a.temp=b.altActive?!1:!0,b.altActive=!0);a.temp&&(b.showKeySet(),b.$preview.focus());b.typing_event=!0;8!==a.which&&9!==a.which||b.typeIn("",b.typing_options.delay||250,function(){b.typing_event=!1},a)}).bind("keypress.keyboard",
function(a){b.typing_event&&!b.options.lockInput&&b.typeIn("",b.typing_options.delay||250,function(){b.typing_event=!1},a)}))},b.typeIn=function(a,c,d,f){if(b.isVisible()){var g=b.typing_options;!0!==b.typing_options.init&&(g.init=!0,g.text=a,g.len=a.length,g.delay=c||300,g.current=0,g.callback=d);a=g.text.substring(g.current,++g.current);c=b.$keyboard.find(".ui-keyboard-keyset");d='.ui-keyboard-button[data-value="'+(b.typing_keymap.hasOwnProperty(a)?b.typing_keymap[a]:a)+'"]';b.typing_event&&f&&
(b.typing_xref.hasOwnProperty(f.keyCode||f.which)?d=".ui-keyboard-"+b.typing_xref[f.keyCode||f.which]:(d=String.fromCharCode(f.charCode||f.which),d=b.mappedKeys.hasOwnProperty(d)?'.ui-keyboard-button[data-value="'+b.mappedKeys[d]+'"]':".ui-keyboard-"+(f.charCode||f.which)));f=c.filter(":visible").find(d);f.length?b.typing_simulateKey(f,a):(b.typing_event?f=c.find(d):(f=b.typing_keymap.hasOwnProperty(a)?b.typing_keymap[a]:a.charCodeAt(0),"bksp"===f&&(a=f),f=c.find(".ui-keyboard-"+f)),c=f.closest(".ui-keyboard-keyset"),
c.attr("name")?(c=c.attr("name"),b.shiftActive=/shift/.test(c),b.altActive=/alt/.test(c),b.metaActive=b.lastKeyset[2]=c.match(/meta\d+/)||!1,b.showKeySet({name:b.metaActive}),b.typing_simulateKey(f,a)):b.typing_event||(b.insertText(a),b.checkCombos()));g.current<g.len?b.isVisible()&&setTimeout(function(){b.typeIn()},g.delay):(g.init=!1,e.isFunction(g.callback)&&setTimeout(function(){g.callback(b)},g.delay))}else b.typing_options.init=!1,clearTimeout(b.typing_timer)},b.typing_simulateKey=function(a,
c){var d=a.length;d&&a.filter(":visible").trigger("mouseenter.keyboard");b.typing_timer=setTimeout(function(){d&&setTimeout(function(){a.trigger("mouseleave.keyboard")},b.typing_options.delay/3);b.isVisible()&&!b.typing_event&&(b.insertText(c),b.checkCombos())},b.typing_options.delay/3)},b.typing_options.showTyping&&(b.options.alwaysOpen&&b.isVisible()&&b.typing_setup(),b.$el.bind("visible.keyboard",function(a){b.typing_setup()})))})}})(jQuery);
